{% extends 'base.html' %}
{% block title %}User Profile{% endblock %}

{% block content %}
{% with messages = get_flashed_messages() %}
    {% if messages %}
        {% for message in messages %}
            {{message}}
        {% endfor %}
    {% endif %}
{% endwith %}

<main class="app-body">
    <h1 class="title">{{ g.user.username }}</h1>
    <div class="action-buttons">
        <button class="btn" onclick="window.location.href='/users/{{g.user.id}}/edit'">Edit User</button>
        <form action="/users/{{g.user.id}}/delete", method='POST'>
            {{ form.hidden_tag() }}
            
            <button class="btn">Delete User</button>
        </form>
    </div>


    <div class="user-details-div">
        <h2>Items in Pantry: {{ pantry_items | length }}</h2>
    </div>

    <div class="user-details-div">
        <h2 class="details-title">Items About to Expire:</h2>
        {% for item in pantry_items %}
        {% if item.days_left == 1 %}
        <p class="near-expiry details">{{ item.ingredient_name }}: {{ item.days_left }} day remaining</p>
        {% elif item.days_left < 1 %}
        <p class='expired details'>{{ item.ingredient_name }}: EXPIRED</p>
        {% else %}
        <p class='days-left details'>{{ item.ingredient_name }}: {{ item.days_left }} remaining</p>
        {% endif %}
            
        {% endfor %}
        
    </div>
</main>

{% endblock %}